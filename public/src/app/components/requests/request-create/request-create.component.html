<div class="main col-md-12">
  <h2 style="text-align: center;">{{ heading }} Request</h2>

  <form
    class="col-md-12"
    #requestForm="ngForm"
    (ngSubmit)="createRequest(request)"
  >
    <div class="container col-md-12">
      <label class="col-md-12" for="title">
        <b>Token</b>
      </label>
      <input
        type="text"
        [(ngModel)]="request.token"
        class="form-control col-md-12"
        placeholder="Enter Token"
        name="token"
        required
        #token="ngModel"
      />
      <div
        [hidden]="token.valid || token.pristine"
        class="alert alert-danger col-md-12"
      >
        Token is required
      </div>
      <label class="col-md-12" for="fullName">
        <b>fullName</b>
      </label>
      <input
        type="text"
        [(ngModel)]="request.fullName"
        class="form-control col-md-12"
        placeholder="Enter fullName"
        name="fullName"
        required
        #fullName="ngModel"
      />
      <div
        [hidden]="fullName.valid || fullName.pristine"
        class="alert alert-danger col-md-12"
      >
        fullName is required
      </div>

      <label class="col-md-12" for="currentCountry">
        <b>Select currentCountry</b>
      </label>
      <select
        [(ngModel)]="request.currentCountry"
        class="form-control col-md-12"
        name="currentCountry"
        required
        #currentCountry="ngModel"
      >
        <option disabled> currentCountry</option>
        <option *ngFor="let country of countryList" [ngValue]="country.code">
          {{ country.name }} ({{ country.dial_code }})</option
        >
      </select>
      <div
        [hidden]="currentCountry.valid || currentCountry.pristine"
        class="alert alert-danger col-md-12"
      >
        currentCountry is required
      </div>

      <label class="col-md-12" for="phoneNumber">
        <b>phoneNumber</b>
      </label>
      <input
        type="text"
        [(ngModel)]="request.phoneNumber"
        class="form-control col-md-12"
        placeholder="Enter Full Name"
        name="phoneNumber"
        required
        #phoneNumber="ngModel"
      />
      <div
        [hidden]="phoneNumber.valid || phoneNumber.pristine"
        class="alert alert-danger col-md-12"
      >
        phoneNumber is required
      </div>

      <label class="col-md-12" for="contactFullName">
        <b>Contact Full Name</b>
      </label>
      <input
        type="string"
        [(ngModel)]="request.contactFullName"
        class="form-control col-md-12"
        placeholder="Primary Contact number"
        name="contactFullName"
        #contactFullName="ngModel"
      />

      <label class="col-md-12" for="contactPhone">
        <b>contact Phone</b>
      </label>
      <input
        type="string"
        [(ngModel)]="request.contactPhone"
        class="form-control col-md-12"
        placeholder="Alternate Contact Number"
        name="contactPhone"
        #contactPhone="ngModel"
      />

      <label class="col-md-12" for="age">
        <b>Age</b>
      </label>
      <input
        type="number"
        [(ngModel)]="request.age"
        class="form-control col-md-12"
        placeholder="Age"
        name="age"
        #age="ngModel"
      />

      <label class="col-md-12" for="gender">
        <b>gender</b>
      </label>
      <input
        type="string"
        [(ngModel)]="request.gender"
        class="form-control col-md-12"
        placeholder="gender"
        name="gender"
        #gender="ngModel"
      />

      <label class="col-md-12" for="supportRequested">
        <b>supportRequested</b>
      </label>
      <input
        type="string"
        [(ngModel)]="request.supportRequested"
        class="form-control col-md-12"
        placeholder="supportRequested"
        name="supportRequested"
        #supportRequested="ngModel"
      />

      <label class="col-md-12" for="supportRequiredFor">
        <b>supportRequiredFor</b>
      </label>
      <input
        type="string"
        [(ngModel)]="request.supportRequiredFor"
        class="form-control col-md-12"
        placeholder="supportRequiredFor"
        name="supportRequiredFor"
        #supportRequiredFor="ngModel"
      />

      <label class="col-md-12" for="postal">
        <b>postal</b>
      </label>
      <input
        type="string"
        [(ngModel)]="request.postal"
        class="form-control col-md-12"
        placeholder="postal"
        name="postal"
        #postal="ngModel"
      />

      <label class="col-md-12" for="email">
        <b>email</b>
      </label>
      <input
        type="string"
        [(ngModel)]="request.email"
        class="form-control col-md-12"
        placeholder="email"
        name="email"
        #email="ngModel"
      />

      <label class="col-md-12" for="fullAddress">
        <b>Full Address</b>
      </label>
      <textarea
        class="form-control col-md-12"
        placeholder="Full Address"
        [(ngModel)]="request.fullAddress"
        [maxlength]="400"
        name="fullAddress"
        #fullAddress
      ></textarea>

      <div *ngIf="statuses.length > 1">
        <label class="col-md-12" for="status">
          <b>Status</b>
        </label>
        <select
          [(ngModel)]="request.status"
          class="form-control col-md-12"
          name="status"
          required
          #status="ngModel"
        >
          <option disabled> Status</option>
          <option *ngFor="let status of statuses" [ngValue]="status.value">{{
            status.label
          }}</option>
        </select>
        <div
          [hidden]="status.valid || status.pristine"
          class="alert alert-danger col-md-12"
        >
          Status is required
        </div>
      </div>
      <div class="col-md-12" style="margin-bottom: 10px; margin-top: 10px;">
        <b>Please select a category and role to find the relevant assignee.</b>
      </div>
      <label class="col-md-12" for="category">
        <b>Category</b>
      </label>
      <select
        class="form-control col-md-12"
        placeholder="Select Category"
        name="category"
        onchange="onCategoryChange($event)"
      >
        <option disabled>Select Category</option>
        <option *ngFor="let category of categories" [ngValue]="category._id">{{
          category.name
        }}</option>
      </select>
      <label class="col-md-12" for="Role">
        <b>Role</b>
      </label>
      <select
        class="form-control col-md-12"
        placeholder="Select Category"
        name="role"
        onchange="onRoleChange($event)"
      >
        <option disabled>Select Role</option>
        <option *ngFor="let role of roles" [ngValue]="role._id">{{
          role.name
        }}</option>
      </select>
      <label class="col-md-12" for="assignee">
        <b>Assignee</b>
      </label>
      <select
        [(ngModel)]="request.assignedTo"
        class="form-control col-md-12"
        name="assignTo"
        required
        #assignTo="ngModel"
      >
        <option disabled> Assign To</option>
        <option *ngFor="let user of users" [ngValue]="user._id"
          >{{ user.fName }} {{ user.lName }} ({{ user.total }} requests in
          queue)</option
        >
      </select>
      <div
        [hidden]="assignTo.valid || assignTo.pristine"
        class="alert alert-danger col-md-12"
      >
        Assignee is required
      </div>
    </div>
  </form>
</div>
